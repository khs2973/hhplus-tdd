## 동시성 제어란?

동시성 제어란 여러 사용자나 프로세스가 데이터를 공유할 떄 발생할 수 있는 문제를 해결하기 위해 데이터베이스 시스템이 트랜잭션을 순서대로 실행하는 것이 아니라, 
트랜잭션이 동시에 실행될 수 있도록 허용하면서도 데이터의 일관성과 무결성을 유지 할 수 있도록 하는 기술이다.

---

## 동시성 제어의 목적

1. 데이터 정합성 유지
   - 여러 사용자가 동시에 포인트를 충전하거나 사용할 때 포인트 값이 엉키거나 잘못 저장되는 현상을 방지한다.
2. Race Condition 방지
   - 공유 자원에 동시에 접근할 경우 순서와 타이밍에 따라 결과가 달라지는 문제가 발생할 수 있다.

---

## 동시성 제어의 종류
1. synchronized
   - 자바 기본 키워드, 블록/메서드 단위 락
   - 메서드나 블록 단위로만 적용이 가능하고 범위 제어가 어렵다.
   - 성능 저하 및 Deadlock이 발생할 수 있다.
2. ReentrantLock
   - 명시적 락, 더 많은 제어가 가능
   - 한 사용자에 대해서만 동기화 적용 가
3. ConcurrentHashMap
   - Segment 기반 락 구조로 일부 영역만 잠금
  
---

## Lock을 활용한 동시성 제어 기법
1. 낙관적 락 ( Optimistic Lock )
   - 충돌이 발생할 가능성이 낮은 경우 사용되는 동시성 제어 기법
   - 실제로 lock을 사용하지 않고 version을 사용해 정합성을 맞춘다.
   - 자원에 lock을 직접 걸어서 선점하지 않고 동시성 문제가 실제로 발생하면 그때가서 처리
     
2. 비관적 락 ( Pessimistic Lock )
   - 공유 자원에 접근하기 전에 락을 선점하여 다른 트랜잭션이 동시에 접근하지 못하도록 막는다
   - 충돌을 사전에 방지하여 정합성 보장
